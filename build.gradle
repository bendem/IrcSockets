plugins {
    id 'java'
    id 'maven'
}

group 'be.bendem.irc.ircsockets'
version '1.0-SNAPSHOT'

sourceCompatibility = 1.8
targetCompatibility = 1.8

defaultTasks 'build'

configurations {
    shadow
    compile.extendsFrom shadow
}

repositories {
    mavenLocal()
    mavenCentral()
    maven {
        name 'kitteh'
        url 'http://repo.kitteh.org/content/groups/public/'
    }
}

dependencies {
    shadow 'org.java-websocket:Java-WebSocket:1.3.1-SNAPSHOT'
    shadow 'org.kitteh.irc:client-lib:0.3.4'
    shadow 'com.google.code.gson:gson:2.3.1'
}

jar {
    configurations.shadow.each { slice ->
        from(project.zipTree(slice)) {
            exclude 'META-INF/DEPENDENCIES',
                    'META-INF/ECLIPSEF.RSA',
                    'META-INF/ECLIPSEF.SF',
                    'META-INF/LICENSE',
                    'META-INF/LICENSE.txt',
                    'META-INF/NOTICE',
                    'META-INF/NOTICE.txt',
                    'about_files/**',
                    'about.html',
                    'LICENSE'
        }
    }

    manifest {
        attributes 'Main-Class': 'be.bendem.irc.ircsockets.Application'
    }
}
